<?php
/**
 * Loop for home page.
 *
 * @package ZlotyKlucz
 */

defined( 'ABSPATH' ) || exit;

global $post;

$post_date     = get_the_date( get_option( 'date_format' ) );
$post_date_iso = get_the_time( 'c' );

$defaults = array(
	'heading_tag' => 'h3',
);

$args = wp_parse_args( $args, $defaults );

$city_terms     = get_the_terms( $post->ID, 'property_city' );
$property_city  = $city_terms[0]->name ?? null;
$property_area  = get_field( 'property_area', $post->ID );
$property_price = get_field( 'property_price', $post->ID );
?>

<a href="<?php the_permalink(); ?>" class="card-property onscroll">
	<div class="card-property__thumbnail">
		<?php the_post_thumbnail( 'medium' ); ?>
	</div>
	<div class="card-property__content">
		<<?php echo esc_html( $args['heading_tag'] ); ?> class="card-property__title has-h-4-font-size">
			<?php echo ! empty( get_the_title() ) ? esc_html( get_the_title() ) : esc_html__( 'No title', 'zloty-klucz' ); ?>
		</<?php echo esc_html( $args['heading_tag'] ); ?>>
		<p class="card-property__info">
			<?php if ( ! empty( $property_city ) ) { ?>
				<div class="card-property__info__item">
					<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
						<path d="M25.7739 10.5625C24.4614 4.7875 19.4239 2.1875 14.9989 2.1875C14.9989 2.1875 14.9989 2.1875 14.9864 2.1875C10.5739 2.1875 5.5239 4.775 4.2114 10.55C2.7489 17 6.6989 22.4625 10.2739 25.9C11.5989 27.175 13.2989 27.8125 14.9989 27.8125C16.6989 27.8125 18.3989 27.175 19.7114 25.9C23.2864 22.4625 27.2364 17.0125 25.7739 10.5625Z" fill="#EDC74C"/>
						<path d="M14.9995 16.8252C17.1741 16.8252 18.937 15.0624 18.937 12.8877C18.937 10.7131 17.1741 8.9502 14.9995 8.9502C12.8249 8.9502 11.062 10.7131 11.062 12.8877C11.062 15.0624 12.8249 16.8252 14.9995 16.8252Z" fill="#191919"/>
					</svg>
					<?php echo esc_html( $property_city ); ?>
				</div>
			<?php } ?>
			<?php if ( ! empty( $property_area ) ) { ?>
				<div class="card-property__info__item">
					<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
						<path d="M27.5 9.7625V20.2375C27.5 24.7875 24.7875 27.5 20.2375 27.5H9.7625C9.5125 27.5 9.2625 27.4875 9.025 27.475C7.4875 27.375 6.1875 26.9375 5.1625 26.1875C4.6375 25.825 4.175 25.3625 3.8125 24.8375C2.95 23.65 2.5 22.1 2.5 20.2375V9.7625C2.5 5.4625 4.925 2.8 9.025 2.5375C9.2625 2.5125 9.5125 2.5 9.7625 2.5H20.2375C22.1 2.5 23.65 2.95 24.8375 3.8125C25.3625 4.175 25.825 4.6375 26.1875 5.1625C27.05 6.35 27.5 7.9 27.5 9.7625Z" fill="#EDC74C"/>
						<path d="M22.5 13.4375C23.0125 13.4375 23.4375 13.0125 23.4375 12.5V7.5C23.4375 7.375 23.4125 7.2625 23.3625 7.1375C23.2625 6.9125 23.0875 6.725 22.85 6.625C22.7375 6.5875 22.625 6.5625 22.5 6.5625H17.5C16.9875 6.5625 16.5625 6.9875 16.5625 7.5C16.5625 8.0125 16.9875 8.4375 17.5 8.4375H20.2375L15 13.675L9.7625 8.4375H12.5C13.0125 8.4375 13.4375 8.0125 13.4375 7.5C13.4375 6.9875 13.0125 6.5625 12.5 6.5625H7.5C7.375 6.5625 7.2625 6.5875 7.1375 6.6375C6.9125 6.725 6.725 6.9125 6.6375 7.1375C6.5875 7.2625 6.5625 7.375 6.5625 7.5V12.5C6.5625 13.0125 6.9875 13.4375 7.5 13.4375C8.0125 13.4375 8.4375 13.0125 8.4375 12.5V9.7625L13.675 15L8.4375 20.2375V17.5C8.4375 16.9875 8.0125 16.5625 7.5 16.5625C6.9875 16.5625 6.5625 16.9875 6.5625 17.5V22.5C6.5625 22.625 6.5875 22.7375 6.6375 22.8625C6.7375 23.0875 6.9125 23.275 7.15 23.375C7.25 23.4125 7.375 23.4375 7.5 23.4375H12.5C13.0125 23.4375 13.4375 23.0125 13.4375 22.5C13.4375 21.9875 13.0125 21.5625 12.5 21.5625H9.7625L15 16.325L20.2375 21.5625H17.5C16.9875 21.5625 16.5625 21.9875 16.5625 22.5C16.5625 23.0125 16.9875 23.4375 17.5 23.4375H22.5C22.625 23.4375 22.75 23.4125 22.8625 23.3625C23.0875 23.2625 23.275 23.0875 23.375 22.85C23.425 22.7375 23.45 22.6125 23.45 22.4875V17.4875C23.45 16.975 23.025 16.55 22.5125 16.55C22 16.55 21.575 16.975 21.575 17.4875V20.225L16.325 15L21.5625 9.7625V12.5C21.5625 13.0125 21.9875 13.4375 22.5 13.4375Z" fill="#191919"/>
					</svg>
					<?php echo esc_html( $property_area . 'm²' ); ?>
				</div>
			<?php } ?>
			<?php if ( ! empty( $property_price ) ) { ?>
				<div class="card-property__info__item">
					<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
						<path d="M15 27.3748C21.9035 27.3748 27.5 21.7784 27.5 14.8748C27.5 7.97119 21.9035 2.37476 15 2.37476C8.09644 2.37476 2.5 7.97119 2.5 14.8748C2.5 21.7784 8.09644 27.3748 15 27.3748Z" fill="#EDC74C"/>
						<path d="M17.8252 15L15.9377 14.3375V10.1H16.3877C17.4002 10.1 18.2252 10.9875 18.2252 12.075C18.2252 12.5875 18.6502 13.0125 19.1627 13.0125C19.6752 13.0125 20.1002 12.5875 20.1002 12.075C20.1002 9.95 18.4377 8.225 16.3877 8.225H15.9377V7.5C15.9377 6.9875 15.5127 6.5625 15.0002 6.5625C14.4877 6.5625 14.0627 6.9875 14.0627 7.5V8.225H13.2502C11.4002 8.225 9.8877 9.7875 9.8877 11.7C9.8877 13.9375 11.1877 14.65 12.1752 15L14.0627 15.6625V19.8875H13.6127C12.6002 19.8875 11.7752 19 11.7752 17.9125C11.7752 17.4 11.3502 16.975 10.8377 16.975C10.3252 16.975 9.9002 17.4 9.9002 17.9125C9.9002 20.0375 11.5627 21.7625 13.6127 21.7625H14.0627V22.5C14.0627 23.0125 14.4877 23.4375 15.0002 23.4375C15.5127 23.4375 15.9377 23.0125 15.9377 22.5V21.775H16.7502C18.6002 21.775 20.1127 20.2125 20.1127 18.3C20.1002 16.05 18.8002 15.3375 17.8252 15ZM12.8002 13.2375C12.1627 13.0125 11.7752 12.8 11.7752 11.7125C11.7752 10.825 12.4377 10.1125 13.2627 10.1125H14.0752V13.6875L12.8002 13.2375ZM16.7502 19.9H15.9377V16.325L17.2002 16.7625C17.8377 16.9875 18.2252 17.2 18.2252 18.2875C18.2252 19.175 17.5627 19.9 16.7502 19.9Z" fill="#191919"/>
					</svg>
					<?php echo esc_html( $property_price . 'zł' ); ?>
				</div>
			<?php } ?>
		</p>
	</div>
</a>
